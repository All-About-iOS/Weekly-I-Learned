# CPU 스케줄링

- **`운영체제가 프로세스에게 CPU자원을 합리적으로 배분하는 것`**으로, CPU자원이 효율적으로 배분되지 못하면 실행되어야 할 프로세스가 실행되지 못하거나, 중요하지 않은 프로세스가 먼저 실행되는 등의 문제가 발생할 수 있다.

## 우선순위

- 우선순위가 높은 프로세스는 일반적으로, 입출력 작업이 많은 프로세스가 있다.
    - **입출력 집중 프로세스 ( 입출력 버스트가 많은 프로세스 )**
        - CPU를 적게 사용해 처리가 빠르고, 입출력 완료 전까지 대기상태에 들어가기 때문에 입출력 작업이 우선순위가 높다.
    - **CPU 집중 프로세스 ( CPU 버스트가 많은 프로세스 )**
        - CPU를 많이 사용해 처리가 느리기 때문에, 우선순위가 낮다.
- 운영체제는 **`각 프로세스의 PCB에 우선순위를 명시`**하고, PCB에 적힌 우선순위를 기준으로 먼저 처리할 프로세스를 결정한다.

<aside>
💡 하지만, 모든 프로세스를 뒤져 다음 프로세스인 PCB를 찾는 것은 쉽지 않고, 효율적이지 못하다.

이를 위해 스케줄링 큐가 도입된다

</aside>

## 스케줄링 큐

- **`우선순위에 따른 프로세스 관리를 위한 큐`**
- 메모리에 적재될 프로세스, CPU를 사용할 프로세스, 입출력 장치를 사용할 프로세스 등을 각각의 큐에 삽입해 줄을 세우는 것

### 준비 큐, 대기 큐

- 준비 큐: CPU 자원을 이용하고 싶은 프로세스가 기다리는 큐
- 대기 큐: 입출력 장치를 이용하기 위해 대기하는 프로세스가 기다리는 큐
- 일반적으로 큐는 FIFO의 특징을 가지지만, 스케줄링 큐의 경우 PCB의 우선순위가 높은 프로세스가 먼저 처리될 수 있다.

### 선점형, 비선점형 스케줄링

- 선점형 스케줄링
    - **`하나의 프로세스가 자원 사용을 독점할 수 없는 스케줄링 방식`**
    - 프로세스마다 정해진 시간만큼 CPU를 사용하고, 정해진 시간이 지나 타이머 인터럽트가 발생하면 운영체제가 해당 프로세스로부터 CPU 자원을 빼앗아 다음 프로세스에게 할당하는 경우도 선점형 스케줄링 방식의 일종이다.
    - 장점
        - 어느 한 프로세스의 자원 독점을 막고, 프로세스들에 골고루 자원을 배분할 수 있다.
    - 단점
        - Context Switching이 더 많이 발생하며, 이에 따른 오버헤드가 발생할 수 있다.
- 비선점형 스케줄링
    - **`하나의 프로세스가 자원 사용을 독점하는 스케줄링 방식`**
    - 장점
        - Context Switching이 적게 발생해, 오버헤드가 적다.
    - 단점
        - 당장 자원이 필요한 프로세스가 있더라도, 현재 프로세스가 종료 또는 대기상태가 될 때까지 기다려야 하기 때문에 자원을 골고루 사용할 수 없다.

---

## CPU 스케줄링 알고리즘

- 해당 알고리즘은 단순 ‘아이디어’의 일종이기 때문에, 굳이 외우지는 않아도 됨.

### 선입 선처리 알고리즘 ( FCFS 스케줄링, First Come First Served  Scheduling )

- 기본적인 비선점형 스케줄링 방식
- 스케줄링 큐에 CPU를 오래 사용하는 프로세스가 먼저 들어오면, CPU를 적게 사용하는 다른 프로세스들의 기다리는 시간이 길어지는 문제가 있다. `(호위 효과)`

### 최단 작업 우선 스케줄링 ( SJF 스케줄링, Shortest Job First Scheduling )

- 기본적으로 비선점형 스케줄링 방식이지만, 선점형 스케줄링으로도 구현 가능(선점형 최소 작업 우선 스케줄링 방식)
- `CPU 이용 시간이 짧은 프로세스 먼저 처리하는 방식`

### 라운드 로빈 스케줄링 ( Round Robin  Scheduling )

- `FCFS 스케줄링 + 타임 슬라이스 개념이 더해진 스케줄링 방식.`
    - 정해진 타임 슬라이스만큼의 시간만 CPU를 이용하는 선점형 스케줄링 방식.
- 타임 슬라이스 내에 처리되지 못한 프로세스는 큐의 맨 뒤로 보낸다. ( Context Switching 발생 )
    - 타임 슬라이스 길이가 짧으면, Context Switcing이 자주 발생해 성능 저하 가능성이 높고
    - 타임 슬라이스 길이가 길면, FCFS 스케줄링처럼 호위 효과가 발생할 가능성이 높다.

### 최소 잔여 시간 우선 스케줄링 ( SRT 스케줄링, Shortest Remaining  Scheduling )

- 최단 작업 스케줄링 + 라운드 로빈 스케줄링
    - 정해진 타임 슬라이스만큼 CPU를 사용하되, CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택된다.

### 우선순위 스케줄링 ( Priority Scheduling )

- FCFS, SJF, 라운드 로빈, SRT 모두 우선순위 스케줄링의 일종이다.
- 우선순위가 같은 프로세스는 FCFS 스케줄링을 사용한다.
- 문제점
    - `기아현상`: 우선순위가 낮은 프로세스가 우선순위가 높은 프로세스에 의해 실행이 계속 지연되는 문제
- 해결 방안
    - `에이징`: 오래 대기한 프로세스의 우선순위를 조금씩 높이는 방법

### 다단계 큐 스케줄링 ( Multilevel Queue Scheduling )

- `우선순위 별 준비 큐를 여러 개 사용하는 스케줄링 방식`으로, 우선순위 큐가 발전한 형태.
- 장점
    - 우선순위를 구분하여 실행하기 편리.
    - 큐마다 다른 스케줄링 방식 채택 가능
- 단점
    - 다른 큐로 이동 불가능: 기아현상 발생

### 다단계 피드백 큐 스케줄링

- 다단계 큐 스케줄링의 발전 형태로, 다른 큐로 이동할 수 있다는 특징이 있다.
- CPU 이용시간이 긴 프로세스는 우선순위를 낮추고, 낮은 우선순위 큐에서 오래 머무르는 프로세스는 에이징을 통해 우선순위를 높이는 방식으로, 구현은 까다롭지만 가장 일반적인 CPU스케줄링 알고리즘이다.
-
